<!-- Filter and Search Section -->
<div class="card">
    <div class="card-header">
        <h5><i class="fas fa-filter"></i> Filter & Search Expenses</h5>
    </div>
    <div class="card-body">
        <form method="get" id="filterForm">
            <div class="row">
                <div class="col-md-3">
                    <div class="mb-3">
                        <label for="{{ filter_form.date_from.id_for_label }}" class="form-label">{{ filter_form.date_from.label }}</label>
                        {{ filter_form.date_from }}
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="mb-3">
                        <label for="{{ filter_form.date_to.id_for_label }}" class="form-label">{{ filter_form.date_to.label }}</label>
                        {{ filter_form.date_to }}
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="mb-3">
                        <label for="{{ filter_form.category.id_for_label }}" class="form-label">{{ filter_form.category.label }}</label>
                        {{ filter_form.category }}
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="mb-3">
                        <label for="{{ filter_form.search.id_for_label }}" class="form-label">{{ filter_form.search.label }}</label>
                        {{ filter_form.search }}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <div class="mb-3">
                        <label for="{{ filter_form.amount_min.id_for_label }}" class="form-label">{{ filter_form.amount_min.label }}</label>
                        {{ filter_form.amount_min }}
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="mb-3">
                        <label for="{{ filter_form.amount_max.id_for_label }}" class="form-label">{{ filter_form.amount_max.label }}</label>
                        {{ filter_form.amount_max }}
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="mb-3">
                        <label for="{{ filter_form.sort_by.id_for_label }}" class="form-label">{{ filter_form.sort_by.label }}</label>
                        {{ filter_form.sort_by }}
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="mb-3">
                        <label class="form-label">&nbsp;</label>
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-search"></i> Apply Filters
                            </button>
                            <a href="{% url 'home' %}" class="btn btn-outline-secondary">
                                <i class="fas fa-times"></i> Clear
                            </a>
                            <a href="{% url 'export_expenses_csv' %}{% if request.GET %}?{{ request.GET.urlencode }}{% endif %}" 
                               class="btn btn-outline-success">
                                <i class="fas fa-download"></i> Export CSV
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% if filter_form.errors %}
                <div class="alert alert-danger">
                    {% for error in filter_form.non_field_errors %}
                        <div>{{ error }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        </form>
    </div>
</div>
